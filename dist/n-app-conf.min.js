"use strict";var fs=require("fs"),extend=require("extend"),util_1=require("util"),Options=function(){function e(e){this.filename=e}return e}();exports.Options=Options;var Settings=function(){function e(e){this.options=e,this.DEFAULT_HIERARCHY_DELIMITER="__",this._entries={},this.buildSettings(),this.applyEnvironmentOverrides(this._entries)}return Object.defineProperty(e.prototype,"entries",{get:function(){return this._entries},enumerable:!0,configurable:!0}),e.prototype.applyEnvironmentOverrides=function(e,t){var i=this;void 0===t&&(t=null),Object.keys(e).forEach(function(n){var r=e[n];if("object"==typeof r){var s=null===t?n:""+t+i.DEFAULT_HIERARCHY_DELIMITER+n;i.applyEnvironmentOverrides(r,s)}else i.processKey(n,e,t)})},e.prototype.buildSettings=function(){var e=fs.readFileSync(this.options.filename,"UTF8");extend(!0,this._entries,JSON.parse(e))},e.prototype.processKey=function(e,t,i){var n=null===i?e:""+i+this.DEFAULT_HIERARCHY_DELIMITER+e,r=process.env[n];util_1.isNullOrUndefined(r)?t[e]=t[e]:t[e]=r},e}();exports.Settings=Settings;